(this["webpackJsonpultimate-systems-test-task"]=this["webpackJsonpultimate-systems-test-task"]||[]).push([[0],{117:function(e,t,c){},119:function(e,t,c){},120:function(e,t,c){},243:function(e,t,c){},244:function(e,t,c){},245:function(e,t,c){},246:function(e,t,c){},247:function(e,t,c){},248:function(e,t,c){},249:function(e,t,c){"use strict";c.r(t);var a=c(3),s=c.n(a),n=c(105),r=c.n(n),i=(c(117),c(36)),o=c(15),l=c(0),d=c.n(l),j=c(2),u=c(71),m=c(8),b=(c(119),c(13)),h=(c(120),c(4)),f=function(e){var t=e.children,c=e.isActive;return Object(h.jsx)("div",{className:"modalWindow ".concat(c?"active":""),children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:Object(h.jsx)("div",{className:"modalContent col-md-4 col-xl-5",children:t})})})})},x=function(e){var t=e.isActive,c=e.setIsActive,s=e.addList,n=e.emptyListName,r=e.clearData,i=e.listName,o=e.setListName,l=e.setEmptyListName,d=e.tasks,j=e.setTasks,u=e.form1,x=e.form2,O=Object(a.useState)(!1),p=Object(m.a)(O,2),v=p[0],N=p[1],g=Object(a.useState)(""),w=Object(m.a)(g,2),A=w[0],y=w[1],C=Object(a.useState)(!1),S=Object(m.a)(C,2),k=S[0],E=S[1];return Object(h.jsx)(f,{isActive:t,children:Object(h.jsxs)("div",{className:"modalContent d-flex flex-column",children:[Object(h.jsx)("form",{onSubmit:s,id:u}),Object(h.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),""===A)N(!0);else{N(!1);var t={name:A,isDone:k};j([].concat(Object(b.a)(d),[t])),y(""),E(!1)}},id:x}),Object(h.jsx)("input",{className:"modalListInput ".concat(n?"borderRed":""),name:"listName",type:"text",value:i,placeholder:"List name",form:u,onChange:function(e){o(e.target.value),l(!1)}}),Object(h.jsx)("hr",{className:"dividingLine"}),Object(h.jsxs)("div",{style:{minHeight:"150px",height:"350px",overflowY:"auto"},children:[d.map((function(e,t){return Object(h.jsxs)("div",{className:"modalItem",children:[Object(h.jsxs)("label",{className:"modalCheckbox",children:[Object(h.jsx)("input",{type:"checkbox",checked:e.isDone,onChange:function(c){j((function(a){var s=Object(b.a)(a);return s[t]={name:e.name,isDone:c.target.checked},s}))}}),Object(h.jsx)("span",{})]}),Object(h.jsx)("span",{className:"modalTaskContent",children:e.name})]},t+Date.now())})),Object(h.jsxs)("div",{className:"modalItem",children:[Object(h.jsxs)("label",{className:"modalCheckbox",children:[Object(h.jsx)("input",{type:"checkbox",form:x,checked:k,onChange:function(e){return E(e.target.checked)}}),Object(h.jsx)("span",{})]}),Object(h.jsx)("input",{className:"modalTaskInput ".concat(v?"borderRed":""),type:"text",form:x,onChange:function(e){y(e.target.value),N(!1)},value:A,placeholder:"Task name"})]}),Object(h.jsxs)("div",{className:"buttons1",children:[Object(h.jsx)("button",{className:"cancelButton",onClick:function(e){e.preventDefault(),j(d.filter((function(e){return!0!==e.isDone})))},children:"CANCEL"}),Object(h.jsx)("button",{className:"addButton",type:"submit",form:x,children:"ADD"})]})]}),Object(h.jsxs)("div",{className:"buttons2 mt-auto",children:[Object(h.jsx)("button",{className:"cancelButton",onClick:function(){c(!1),r()},children:"CANCEL"}),""!==i&&0!==d.length?Object(h.jsx)("button",{className:"saveButton",type:"submit",form:u,children:"SAVE"}):Object(h.jsx)("button",{disabled:!0,className:"saveButton opacity-50",type:"submit",form:u,children:"SAVE"})]})]})})},O=c(47),p=c.n(O),v="https://ultimate-to-do-ea1f8-default-rtdb.europe-west1.firebasedatabase.app",N=function(e){return p.a.get("".concat(v,"/").concat(e,"/to-do-list.json"))},g=function(e,t){return p.a.post("".concat(v,"/").concat(e,"/to-do-list.json"),t)},w=function(e,t,c){return p.a.put("".concat(v,"/").concat(e,"/").concat(c,".json"),t)},A=function(e,t){return p.a.delete("".concat(v,"/").concat(e,"/to-do-list/").concat(t,".json"))},y=function(e){var t=e.searchText,c=e.setSearchText;return Object(h.jsx)("div",{className:"col-md-8 d-flex justify-content-between searchPanel",children:Object(h.jsx)("div",{className:"col-4 d-flex align-items-end",children:Object(h.jsx)("input",{value:t,className:"searchInput",type:"text",placeholder:"Search",onChange:function(e){c(e.target.value)}})})})},C=c.p+"static/media/spinner.46b47cf4.svg",S=function(e){e.classes;return Object(h.jsx)("div",{className:"d-flex justify-content-center",children:Object(h.jsx)("img",{src:C,alt:"Loading..."})})},k=Object(a.createContext)(),E=function(e){var t=e.children,c=Object(a.useState)(!1),s=Object(m.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(!1),o=Object(m.a)(i,2),l=o[0],d=o[1],j=Object(a.useState)(""),u=Object(m.a)(j,2),b=u[0],f=u[1],x=function(){r(!1),d(!1)};return Object(h.jsx)(k.Provider,{value:{showAlert:function(e,t){f(e),r(!0),t&&d(t),setTimeout(x,5e3)},hideAlert:x,alertMsg:b,isVisible:n,alertSuccess:l},children:t})},T=function(e,t){e.response?t(e.response.data.data[0].messages[0].message):e.request?t("Some client error has occurred, please try again. Error message: ".concat(e.message)):t("Some error has occurred, please try again.")},L=c(106),I=c(27),P=(Object(L.a)({apiKey:"AIzaSyD_qgls24qFVSgOm0pkzbcUwEzM_k4SCPE",authDomain:"ultimate-to-do-ea1f8.firebaseapp.com",databaseURL:"https://ultimate-to-do-ea1f8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"ultimate-to-do-ea1f8",storageBucket:"ultimate-to-do-ea1f8.appspot.com",messagingSenderId:"210384101303",appId:"1:210384101303:web:54a9639eb0499961929232"}),s.a.createContext()),U=function(e){var t=e.children,c=Object(a.useState)(!1),s=Object(m.a)(c,2),n=s[0],r=s[1],i=Object(I.b)();return Object(a.useEffect)((function(){Object(I.c)(i,(function(e){e&&r(e)}))}),[i]),Object(h.jsx)(P.Provider,{value:{currentUser:n,setCurrentUser:r,auth:i},children:t})},D=function(){var e=Object(a.useState)(!0),t=Object(m.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(!0),r=Object(m.a)(n,2),i=r[0],l=r[1],b=Object(a.useState)(!1),f=Object(m.a)(b,2),O=f[0],p=f[1],v=Object(a.useState)(!1),C=Object(m.a)(v,2),E=C[0],L=C[1],I=Object(a.useState)(!1),U=Object(m.a)(I,2),D=U[0],B=U[1],V=Object(a.useState)(""),q=Object(m.a)(V,2),R=q[0],Y=q[1],M=Object(a.useState)([]),Q=Object(m.a)(M,2),F=Q[0],G=Q[1],K=Object(a.useState)([]),H=Object(m.a)(K,2),W=H[0],X=H[1],z=Object(a.useState)([]),J=Object(m.a)(z,2),Z=J[0],_=J[1],$=Object(a.useState)({}),ee=Object(m.a)($,2),te=ee[0],ce=ee[1],ae=Object(a.useState)(""),se=Object(m.a)(ae,2),ne=se[0],re=se[1],ie=Object(a.useContext)(k).showAlert,oe=Object(a.useContext)(P).currentUser,le=function(){N(oe.uid).then((function(e){if(null!==e.data){var t=Object.keys(e.data).map((function(t){return Object(u.a)(Object(u.a)({},e.data[t]),{},{id:t})}));G(t),X(t),l(!1),s(!1)}else null===e.data&&(l(!1),s(!0))})).catch((function(e){l(!1),console.log(e),T(e,ie)}))};Object(a.useEffect)((function(){return oe&&le(),function(){G([]),X([])}}),[oe]),Object(a.useEffect)((function(){!function(e){var t=F;t=t.filter((function(t){return-1!==t.name.toLowerCase().search(e.toLowerCase())})),X(t)}(ne)}),[ne]);var de=function(){Y(""),_([])};if(!oe)return Object(h.jsx)(o.a,{to:"/login"});var je=function(){var e=Object(j.a)(d.a.mark((function e(t,c){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==R){e.next=4;break}B(!0),e.next=20;break;case 4:if(B(!1),a=new Date,s={name:R,task:Z,created:a.toISOString().split("T")[0].split("-").reverse().join(".")},e.prev=7,e.t0=oe,!e.t0){e.next=12;break}return e.next=12,t(oe.uid,s,c&&c);case 12:le(),de(),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(7),l(!1),e.t1.response?ie(e.t1.response.data):ie("Some error has occurred, please try again. Error message: ".concat(e.t1.message));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t,c){return e.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(!0),p(!1),e.next=5,je(g);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(!0),L(!1),re(""),e.next=6,je(w,te.id);case 6:ce({});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{l(!0),oe&&A(oe.uid,t).then((function(){G(F.filter((function(e){return e.id!==t}))),X(W.filter((function(e){return e.id!==t}))),l(!1),1===W.length&&s(!0)})).catch((function(e){l(!1),T(e,ie)}))}catch(c){l(!1),ie("Some error has occurred, please try again. Error message: ".concat(c.message))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"dataPage",children:[Object(h.jsx)(x,{isActive:O,setIsActive:p,addList:ue,emptyListName:D,listName:R,setListName:Y,setEmptyListName:B,tasks:Z,setTasks:_,clearData:de,form1:"form1",form2:"form2"}),Object(h.jsx)(x,{isActive:E,setIsActive:L,addList:me,emptyListName:D,listName:R,setListName:Y,setEmptyListName:B,tasks:Z,setTasks:_,clearData:de,form1:"form3",form2:"form4"}),Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsxs)("div",{className:"row text-white d-flex justify-content-center align-items-start",children:[Object(h.jsx)(y,{searchText:ne,setSearchText:re}),i?Object(h.jsx)(S,{}):c?Object(h.jsx)("h1",{className:"text-white text-center",children:"Your to-do list is empty"}):W.map((function(e){var t=[];e.task.forEach((function(e){!0===e.isDone&&t.push(e)}));var c=e.task.length,a=t.length,s=c-a;return Object(h.jsx)("div",{className:"col-md-8 container-fluid",onClick:function(){L(!0),ce(e),Y(e.name),_(e.task)},children:Object(h.jsxs)("div",{className:"row dataItem d-lg-flex justify-content-between align-items-center",children:[Object(h.jsx)("div",{className:"col-lg-3",children:e.name}),Object(h.jsx)("div",{className:"col-lg-3",children:"Created at: ".concat(e.created)}),Object(h.jsx)("div",{className:"col-lg-5",children:"Completed: ".concat(a,", Uncompleted: ").concat(s,", All: ").concat(c)}),Object(h.jsx)("div",{className:"col-lg-1",children:Object(h.jsx)("button",{className:"deleteButton",onClick:function(t){t.stopPropagation(),be(e.id)}})})]})},e.id)}))]}),Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:Object(h.jsx)("div",{className:"col-md-8 position-relative",children:Object(h.jsx)("button",{className:"addListButton",onClick:function(){return p(!0)}})})})]})]})},B=c(60),V=c(30),q=c(25),R=(c(243),function(e){return Object(h.jsx)("div",{className:"d-flex justify-content-start textError",children:e.children})}),Y=(c(244),function(e){var t=e.itemId,c=e.placeholder,a=e.itemType,s=e.itemName,n=e.itemLabel,r=e.important,i=(e.errors,e.component);return Object(h.jsxs)("div",{className:"mb-4",children:[n&&Object(h.jsxs)("label",{htmlFor:t,className:"textColor form-label",children:[n," ",r?Object(h.jsx)("span",{className:"redText",children:"*"}):""]}),Object(h.jsx)(V.a,{name:s,component:R}),Object(h.jsx)(V.b,{className:"form-control customField",id:t,placeholder:c,type:a,name:s,component:i})]})}),M=(c(245),function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),c=t[0],s=t[1],n=Object(a.useContext)(P),r=n.currentUser,l=n.setCurrentUser,d=n.auth,j=Object(a.useContext)(k).showAlert;if(!1===c&&r)return Object(h.jsx)(o.a,{to:"/main"});var u=q.a({login:q.c().min(4,'"Login" cannot be shorter than 4 characters').required('The field "Login" is required'),password:q.c().min(6,'"Password" cannot be shorter than 5 characters').required('The field "Password" is required')});return Object(h.jsx)("div",{className:"loginPage",children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:c?Object(h.jsx)(S,{}):Object(h.jsxs)("div",{className:"col-md-5 loginPageContent",children:[Object(h.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(h.jsx)("h4",{className:"pageTitle",children:"Login"})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)(V.d,{initialValues:{login:"",password:""},validationSchema:u,onSubmit:function(e,t){var c=t.resetForm;!function(e){s(!0);var t={email:e.login,password:e.password};try{Object(I.d)(d,t.email,t.password).then((function(e){l(e.user),s(!1)})).catch((function(e){s(!1),T(e,j)}))}catch(c){s(!1),j("Some error has occurred, please try again. Error message: ".concat(c.message))}}(e),c({})},children:function(e){var t=e.isValid,c=e.errors,a=e.dirty;Object(B.a)(e,["isValid","errors","dirty"]);return Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:Object(h.jsx)("div",{className:"col-xl-10",children:Object(h.jsxs)(V.c,{className:"d-flex flex-column m-3",children:[Object(h.jsx)(Y,{itemId:"Login",placeholder:"Email or Username",itemType:"text",itemName:"login",important:!0,errors:c}),Object(h.jsx)(Y,{itemId:"Password",placeholder:"Password",itemType:"password",itemName:"password",important:!0,errors:c}),Object(h.jsx)("div",{className:"d-flex justify-content-center",children:Object(h.jsx)("button",{type:"submit",disabled:!t||!a,className:"submitButton btn mt-3",children:"Login"})})]})})})})}})}),Object(h.jsx)("div",{className:"separatingText text-white d-flex justify-content-center",children:"or"}),Object(h.jsx)("div",{className:"text-white d-flex justify-content-center",children:Object(h.jsx)(i.b,{className:"customLink",to:"registration",children:"create an account"})})]})})})})}),Q=(c(246),function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),c=t[0],s=t[1],n=Object(a.useContext)(P),r=n.currentUser,l=n.setCurrentUser,d=n.auth,j=Object(a.useContext)(k).showAlert;if(!1===c&&r)return Object(h.jsx)(o.a,{to:"/main"});var u=q.a().shape({email:q.c().min(6,'"Email" cannot be shorter than 6 characters').required('The field "Email" is required').email('The field "Email" is not valid'),password:q.c().min(6,'"Password" cannot be shorter than 5 characters').required('The field "Password" is required'),repeatPassword:q.c().required('The field "Repeat password" is required').oneOf([q.b("password")],"Passwords mismatch")});return Object(h.jsx)("div",{className:"registrationPage",children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:c?Object(h.jsx)(S,{}):Object(h.jsxs)("div",{className:"col-md-5 registrationPageContent",children:[Object(h.jsx)(i.b,{className:"customLink",to:"login",children:Object(h.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEUAAAAYCAYAAACsnTAAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACESURBVHgB7dTBDYMwDEbhn07aTZIN2g2qbsYmwQEBwcgXrn6flFjK8UmOhOdaa6VtPsIlyErZ+SCmKjOCOARxCOIQxCGIQ5DT1K8exEYd3mc7fyU1WZC3zZ9weAk3+/pUG2V4n5V4fQ49jPtoi0CYEGEChAkQJkCYAGECPoywGcJ8hXwWxGhM7FMirHcAAAAASUVORK5CYII=",alt:"arrow"})}),Object(h.jsx)("div",{className:"col-12 d-flex justify-content-center align-items-center",children:Object(h.jsx)("h4",{className:"pageTitle",children:"Create an new account"})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)(V.d,{initialValues:{username:"",email:"",password:"",repeatPassword:""},validationSchema:u,onSubmit:function(e,t){var c=t.resetForm;!function(e){s(!0);var t={email:e.email,password:e.password};try{Object(I.a)(d,t.email,t.password).then((function(e){l(e.user),s(!1)})).catch((function(e){s(!1),T(e,j)}))}catch(c){s(!1),j("Some error has occurred, please try again. Error message: ".concat(c.message))}}(e),c({})},children:function(e){var t=e.isValid,c=e.errors,a=e.dirty;Object(B.a)(e,["isValid","errors","dirty"]);return Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row d-flex justify-content-center",children:Object(h.jsx)("div",{className:"col-xl-10",children:Object(h.jsxs)(V.c,{className:"d-flex flex-column m-3",children:[Object(h.jsx)(Y,{itemId:"Email",placeholder:"Email",itemType:"email",itemName:"email",important:!0,errors:c}),Object(h.jsx)(Y,{itemId:"Password",placeholder:"Password",itemType:"password",itemName:"password",important:!0,errors:c}),Object(h.jsx)(Y,{itemId:"RepeatPassword",placeholder:"Repeat password",itemType:"password",itemName:"repeatPassword",important:!0,errors:c}),Object(h.jsx)("div",{className:"d-flex justify-content-center",children:Object(h.jsx)("button",{type:"submit",disabled:!t||!a,className:"submitButton btn mt-2",children:"Create"})})]})})})})}})})]})})})})}),F=(c(247),function(){var e=Object(a.useContext)(P),t=e.currentUser,c=e.setCurrentUser,s=e.auth;return Object(h.jsxs)("div",{className:"appHeader",children:[Object(h.jsx)("div",{className:"col-md-6 appHeaderContent",children:"ToDo-List"}),t&&Object(h.jsx)("button",{onClick:function(){Object(I.e)(s).then((function(){c(!1)})).catch((function(e){console.log("log out error")}))},className:"logout"})]})}),G=(c(248),function(){var e=Object(a.useContext)(k),t=e.isVisible,c=e.hideAlert,s=e.alertMsg,n=e.alertSuccess;return t?Object(h.jsxs)("div",{className:"alert alert-dismissible fixed-top ".concat(n?"alert-success":"alert-warning"),children:[n?Object(h.jsx)("strong",{children:"Success!"}):Object(h.jsx)("strong",{children:"Warning!"}),"\xa0",s,Object(h.jsx)("button",{onClick:c,type:"button",className:"btn-close","aria-label":"Close"})]}):null});var K=function(){return Object(h.jsx)("div",{children:Object(h.jsx)(E,{children:Object(h.jsx)(U,{children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(F,{}),Object(h.jsx)(G,{}),Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{path:"/main",component:D}),Object(h.jsx)(o.b,{exact:!0,path:"/login",component:M}),Object(h.jsx)(o.b,{exact:!0,path:"/registration",component:Q}),Object(h.jsx)(o.a,{to:"/main"})]})]})})})})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.eae78cea.chunk.js.map